'use strict';exports.__esModule=true;exports.Item=undefined;var _extends=Object.assign||function(target){for(var i=1;i<arguments.length;i++){var source=arguments[i];for(var key in source){if(Object.prototype.hasOwnProperty.call(source,key)){target[key]=source[key]}}}return target};var _react=require('react');var _react2=_interopRequireDefault(_react);var _propTypes=require('prop-types');var _propTypes2=_interopRequireDefault(_propTypes);var _lodash=require('lodash.uniqueid');var _lodash2=_interopRequireDefault(_lodash);var _utils=require('./utils');var _Svg=require('./components/Svg');var _Svg2=_interopRequireDefault(_Svg);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _objectWithoutProperties(obj,keys){var target={};for(var i in obj){if(keys.indexOf(i)>=0)continue;if(!Object.prototype.hasOwnProperty.call(obj,i))continue;target[i]=obj[i]}return target}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError('Cannot call a class as a function')}}function _possibleConstructorReturn(self,call){if(!self){throw new ReferenceError('this hasn\'t been initialised - super() hasn\'t been called')}return call&&(typeof call==='object'||typeof call==='function')?call:self}function _inherits(subClass,superClass){if(typeof superClass!=='function'&&superClass!==null){throw new TypeError('Super expression must either be null or a function, not '+typeof superClass)}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:false,writable:true,configurable:true}});if(superClass)Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass}var uid=(0,_lodash2.default)();var CloseButton=function CloseButton(props){return _react2.default.createElement('div',{className:'slds-col_bump-left slds-p-left_none slds-p-right_none'},_react2.default.createElement('button',{className:'slds-button slds-button_icon slds-button_icon-container slds-button_icon-x-small',title:props.text||'',onClick:function onClick(e){if(props.onClick!==null){props.onClick(e)}}},_react2.default.createElement(_Svg2.default,{className:'slds-button__icon',variant:'utility',icon:'close'}),_react2.default.createElement('span',{className:'slds-assistive-text'},'Close ',props.text||'')))};var Item=exports.Item=function Item(p){var tabId='tab-'+uid+'-'+p.index;var className=(0,_utils.createClassName)('slds-tabs_default__item',p.isActive?'slds-active':'',p.className);var linkClassName=(0,_utils.createClassName)('slds-tabs_default__link',p.isSubTabs?'slds-p-horizontal_xx-small':'');//  tabindex="0"
return _react2.default.createElement('li',{className:className,title:p.label,role:'presentation'},_react2.default.createElement('a',{className:linkClassName,href:'javascript:void(0);',role:'tab','aria-selected':'true','aria-controls':tabId,id:tabId+'__item',onClick:function onClick(e){if(p.onClick!==null){p.onClick(e,p.index)}}},p.label),p.isSubTabs?_react2.default.createElement(CloseButton,{onClick:function onClick(e){if(p.onClose){p.onClose()}}}):null)};Item.defaultProps={onClick:null};Item.propTypes={label:_propTypes2.default.string.isRequired,isActive:_propTypes2.default.bool// onClick: PropTypes.func,
};var PanelItem=function PanelItem(p){var tabId='tab-'+uid+'-'+p.index;var className=(0,_utils.createClassName)('slds-tabs_default__content',p.isActive?'slds-show':'slds-hide');return _react2.default.createElement('div',{id:tabId,className:className,role:'tabpanel','aria-labelledby':tabId+'__item'},p.children)};var Tabs=function(_Component){_inherits(Tabs,_Component);function Tabs(){var _temp,_this,_ret;_classCallCheck(this,Tabs);for(var _len=arguments.length,args=Array(_len),_key=0;_key<_len;_key++){args[_key]=arguments[_key]}return _ret=(_temp=(_this=_possibleConstructorReturn(this,_Component.call.apply(_Component,[this].concat(args))),_this),_this.state={active:0},_this.handleClick=function(e,i){// console.log(i);
_this.setState({active:i});if(_this.props.onTabClick){_this.props.onTabClick(e,i)}},_this.toArray=function(arr){return _react2.default.Children.toArray(arr)},_temp),_possibleConstructorReturn(_this,_ret)}Tabs.prototype.renderNav=function renderNav(){var _this2=this;var _props=this.props,children=_props.children,isSubTabs=_props.isSubTabs;var className=(0,_utils.createClassName)('slds-tabs_default__item',isSubTabs?'slds-sub-tabs__item slds-grid slds-grid_vertical-align-center':'');var navProps={isSubTabs:isSubTabs,className:className};return _react2.default.createElement('ul',{key:'nav',className:'slds-tabs_default__nav',role:'tablist'},this.toArray(children).map(function(c,i){return _react2.default.createElement(Item,_extends({key:i},navProps,{isActive:_this2.state.active===i},c.props,{onClick:_this2.handleClick,index:i}))}))};Tabs.prototype.renderPanel=function renderPanel(){var _this3=this;return this.toArray(this.props.children).map(function(c,i){return _react2.default.createElement(PanelItem,_extends({key:i},c.props,{index:i,isActive:_this3.state.active===i}))})};Tabs.prototype.renderPosition=function renderPosition(){var elems=[this.renderNav(),this.renderPanel()];if(this.props.menuPosition==='bottom'){return elems.reverse()}return elems};Tabs.prototype.render=function render(){var styleBottom=' .slds-tab-menu-position-bottom .slds-tabs_default__item:after, .slds-tab-menu-position-bottom .slds-tabs--default__item:after{   top: -2px; }  '+' .slds-tab-menu-position-bottom .slds-tabs_default__nav{ border-top: 2px solid #dddbda; border-bottom: 0px !important; }';var _props2=this.props,menuPosition=_props2.menuPosition,isSubTabs=_props2.isSubTabs,inputClassName=_props2.className,restProps=_objectWithoutProperties(_props2,['menuPosition','isSubTabs','className']);if(menuPosition==='bottom'&&isSubTabs){styleBottom+='.slds-sub-tabs.slds-tab-menu-position-bottom .slds-tabs_default__nav{'+'border-top: 1px solid #dddbda !important; }'}var className=(0,_utils.createClassName)('slds-tabs_default','slds-tab-menu-position-'+menuPosition,isSubTabs?'slds-sub-tabs':'',inputClassName);return _react2.default.createElement('div',_extends({},restProps,{className:className}),this.renderPosition(),menuPosition==='bottom'?_react2.default.createElement('style',{dangerouslySetInnerHTML:{__html:styleBottom}}):null)};return Tabs}(_react.Component);Tabs.defaultProps={menuPosition:'top',isSubTabs:false};exports.default=Tabs;