'use strict';exports.__esModule=true;var _react=require('react');var _react2=_interopRequireDefault(_react);var _lodash=require('lodash.includes');var _lodash2=_interopRequireDefault(_lodash);var _TableHead=require('./TableHead');var _TableHead2=_interopRequireDefault(_TableHead);var _utils=require('../utils');function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError('Cannot call a class as a function')}}function _possibleConstructorReturn(self,call){if(!self){throw new ReferenceError('this hasn\'t been initialised - super() hasn\'t been called')}return call&&(typeof call==='object'||typeof call==='function')?call:self}function _inherits(subClass,superClass){if(typeof superClass!=='function'&&superClass!==null){throw new TypeError('Super expression must either be null or a function, not '+typeof superClass)}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:false,writable:true,configurable:true}});if(superClass)Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass}var Table=function(_Component){_inherits(Table,_Component);function Table(props){_classCallCheck(this,Table);var _this=_possibleConstructorReturn(this,_Component.call(this,props));_this.handleSort=_this.handleSort.bind(_this);_this.state={sortTableBy:null,sortStatus:'down',data:null};return _this}Table.prototype.handleSort=function handleSort(sortData){var name=sortData.name,status=sortData.status;var _state=this.state,sortTableBy=_state.sortTableBy,data=_state.data;var orderBy=this.props.orderBy;switch(status){case null:case'up':status='down';break;case'down':status='up';break;default:status='down';}if(name!==sortTableBy){status='down'}orderBy=orderBy==='asc'?'desc':'asc';if(this.props.handleSort){this.props.handleSort({sortBy:name,orderBy:orderBy})}this.setState({data:data,sortTableBy:name,sortStatus:status})};Table.prototype.renderHeader=function renderHeader(){var _this2=this;var _props=this.props,header=_props.header,_props$shownIndex=_props.shownIndex,shownIndex=_props$shownIndex===undefined?null:_props$shownIndex,orderBy=_props.orderBy,sortBy=_props.sortBy;var _state2=this.state,sortTableBy=_state2.sortTableBy,sortStatus=_state2.sortStatus;if(header!==null){return header.map(function(_ref,i){var name=_ref.name,text=_ref.text;if(shownIndex.length===0||(0,_lodash2.default)(shownIndex,i)){// temp
if(sortTableBy===null&&i===0){sortTableBy=name}return _react2.default.createElement('th',{key:i},_react2.default.createElement(_TableHead2.default,{text:text,isSorted:sortBy===name,orderBy:sortBy===name?orderBy:null,status:sortStatus,name:name,handleSort:_this2.handleSort}))}return null})}return null};Table.prototype.renderCell=function renderCell(data){var _props2=this.props,shownIndex=_props2.shownIndex,header=_props2.header;var cells=[];var i=0;for(var key in data){if(shownIndex.length===0||(0,_lodash2.default)(shownIndex,i)){// temp
cells.push(_react2.default.createElement('td',{key:key,'data-label':header[i].text||null},_react2.default.createElement('div',{className:'slds-m-left_xx-small slds-truncate'},data[key])))}i++}return cells;//
};Table.prototype.renderBody=function renderBody(){var _this3=this;var data=this.state.data;if(data!=null){return data.map(function(dt,i){return _react2.default.createElement('tr',{key:i},_this3.renderCell(dt))})}return null};Table.prototype.renderEmptyRow=function renderEmptyRow(){var _props3=this.props,header=_props3.header,emptyRow=_props3.emptyRow;if(emptyRow!==null||emptyRow!==0){var rows=[];for(var i=0;i<emptyRow;i++){rows.push(_react2.default.createElement('tr',{key:i},_react2.default.createElement('td',{colSpan:header.length},'\xA0')))}return rows}return null};Table.prototype.componentWillReceiveProps=function componentWillReceiveProps(nextProps){if(nextProps.data!==null){this.setState({data:nextProps.data})}};Table.prototype.render=function render(){var bordered=this.props.bordered;if(this.state.data===null){return _react2.default.createElement('div',{role:'status',className:'slds-spinner slds-spinner_medium'},_react2.default.createElement('span',{className:'slds-assistive-text'},'Loading'),_react2.default.createElement('div',{className:'slds-spinner__dot-a'}),_react2.default.createElement('div',{className:'slds-spinner__dot-b'}))}var className=(0,_utils.createClassName)('slds-table','slds-max-medium-table_stacked-horizontal',bordered?'slds-table_bordered':'',(0,_utils.generalClassNames)(this.props),this.props.className);return _react2.default.createElement('table',{className:className},_react2.default.createElement('thead',null,_react2.default.createElement('tr',null,this.renderHeader())),_react2.default.createElement('tbody',null,this.renderBody()))};return Table}(_react.Component);Table.defaultProps={shownIndex:[]};exports.default=Table;