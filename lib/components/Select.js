'use strict';exports.__esModule=true;var _react=require('react');var _react2=_interopRequireDefault(_react);var _lodash=require('lodash.uniqueid');var _lodash2=_interopRequireDefault(_lodash);var _utils=require('../utils');function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError('Cannot call a class as a function')}}function _possibleConstructorReturn(self,call){if(!self){throw new ReferenceError('this hasn\'t been initialised - super() hasn\'t been called')}return call&&(typeof call==='object'||typeof call==='function')?call:self}function _inherits(subClass,superClass){if(typeof superClass!=='function'&&superClass!==null){throw new TypeError('Super expression must either be null or a function, not '+typeof superClass)}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:false,writable:true,configurable:true}});if(superClass)Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass}var Select=function(_Component){_inherits(Select,_Component);function Select(props){_classCallCheck(this,Select);var _this=_possibleConstructorReturn(this,_Component.call(this,props));_this.handleChange=_this.handleChange.bind(_this);var dv=_this.props.defaultValue;if(typeof dv==='number'){dv=dv.toString()}_this.state={value:dv||''};return _this}Select.prototype.handleChange=function handleChange(e){// console.log();
if(this.props.handleChange){var value=e.target.value;this.props.handleChange(e);this.setState({value:value})}};Select.prototype.componentWillReceiveProps=function componentWillReceiveProps(nextProps){if(nextProps.defaultValue){this.setState({value:nextProps.defaultValue})}};Select.prototype.renderAbbr=function renderAbbr(){if(this.props.required){return _react2.default.createElement('abbr',{className:'slds-required',title:'required'},'*')}return null};Select.prototype.renderOptions=function renderOptions(){var _props=this.props,options=_props.options,value=_props.value;if(options!=null){return options.map(function(opt,i){var v=opt.value;if(typeof v==='number'){v=v.toString()}return _react2.default.createElement('option',{key:i,value:v},opt.text)})}return null};Select.prototype.renderHelp=function renderHelp(uid){var _props2=this.props,showError=_props2.showError,errorMessage=_props2.errorMessage;if(errorMessage){return _react2.default.createElement('div',{className:'slds-form-element__help',id:'error-'+uid},errorMessage)}return null};Select.prototype.renderLabel=function renderLabel(idName){var label=this.props.label;if(label){return _react2.default.createElement('label',{className:'slds-form-element__label',htmlFor:idName},label)}return null};Select.prototype.render=function render(){// console.log(this.props);
var _props3=this.props,label=_props3.label,required=_props3.required,showError=_props3.showError,disabled=_props3.disabled,multiple=_props3.multiple,className=_props3.className;var value=this.state.value;var uid=(0,_lodash2.default)();var idName='select-id-'+uid;var formClassName=(0,_utils.createClassName)('slds-form-element',className,(0,_utils.generalClassNames)(this.props),showError?'slds-has-error':null);var ariaDescribedBy=showError?'error-'+uid:null;return _react2.default.createElement('div',{className:formClassName},this.renderAbbr(),this.renderLabel(idName),_react2.default.createElement('div',{className:'slds-form-element__control'},_react2.default.createElement('div',{className:'slds-select_container'},_react2.default.createElement('select',{value:value,className:'slds-select',id:idName,required:required||null,disabled:disabled||null,multiple:multiple||null,'aria-describedby':ariaDescribedBy,onChange:this.handleChange},this.renderOptions()))),this.renderHelp(uid))};return Select}(_react.Component);exports.default=Select;